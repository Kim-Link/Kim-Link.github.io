---
layout: post
type: LOading
date: 2021-10-27 23:24
category: Programmers
title: CAP 이론에 대하여
subtitle: CAP 그거 쓰는거 아니에요~?..
writer: 000000
post-header: true
header-img: img/about.jpeg
hash-tag: [기술면접, C/S, CAP 이론]
---

<br>

## CAP 정리

-------------

분산 DB 시스템은 일관성(Consistenty), 가용성(Available), 분할내성(Partition Tolerence) 3가지 특성 모두를 만족시킬수 없고 2개만 동시에 수행 가능하다는 이론이다.

<img src="/Users/wildrays/Desktop/Kim-Link.github.io/LOading/2110272324/img/1.jpeg" alt="1" style="zoom:0%;" />

- ### 일관성(Consistenty)

  : 분산 환경에서 모든 노드가 동일한 시간의 동일한 데이터를 보여줘야 한다.(최신 Data)

  - 여러 사용자가 동시에 들어오더라도 같은 데이터를 보고 있어야 한다.

  - 불안요소 : 데이터가 일관 되지 않는것

  <br>

- ### 가용성(Available)

  : 모든 사용자 읽고/쓰기 가능해야 한다. 몇몇 노드의 장애가 발생한다 하더라도 정상적인 노드에 영향을 주면 안되며, 노드에 장애 발생했을때 "실패했습니다" 전송 해야한다.

  - 여러 사용자가 동시에 사용을 할때, 한 사용자가 이상이 생기더라도 나머지 사용자들은 이상이 없어야 한다.
  - 불안요소 : 하나의 노드가 고장났을때

  <br>

- ### 분할내성(Partition Tolerence)

  : 일부 데이터의 손실이 있더라도 시스템은 돌아가야한다.(데이터 유실 허용)

  - 분할(Partition)에 네트워크 장애로 물리적 데이터 손실이 있더라도 사용할수 있어야 한다.
  - 불안요소 : 네트워크 장애

<br><br>

## CAP 시스템의 특성

-------------

- ### CA 시스템 : RDMS(정형 데이터)

  - P를 포기한 것이므로 네트워크 통신장애가 일어나서는 안된다.
  - 통신장애 발생시 통신장애가 복구될때까지 서비스가 안된다.
  - 통신장애를 항상 해결해야 되기 때문에 속도가 느리다.

- ### CP 시스템 : NoSQL(MongoDB)

  - A를 포기한 것이므로 노드의 문제가 발생해서는 안된다.
  - 여러개의 노드중 하나의 노드에 문제가 발생시 그 노드문제 해결해야 한다.
  - 이 경우 성능의 문제가 생길수 있다.

- ### AP  시스템 : NoSQL(Cassandra)

  - C를 포기한 것이므로 데이터의 일관성 문제가  생겨서는 안된다.
  - 데이터의 일관성에 문제가 발생하게 되면 각 노드별 보여지게 되는 정보가 다르게 된다.

<br>

 결국에 3개중 무엇을 포기할 것인가를 고민해야 한다.

일반적으로 NoSQL을 사용할 경우 P(분할내성)을 포기할수가 없다.
