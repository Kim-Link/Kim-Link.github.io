---
layout: post
type: LOading
date: 2024-12-10 15:10
category: 개발
title: 양방향 통신 그리고 웹소켓
subtitle: 소켓소켓웹소켓
writer: 0
post-header: true
header-img: ../cs.webp
hash-tag:
  - 술
  - WebSocket
  - 양방향 통신
  - 통신
  - 네트워크
---


# **양방향 통신의 주요 기술**

양방향 통신을 구현하는 데 사용되는 기술들은 다음과 같습니다:

<br>

## 1. **웹소켓 (WebSocket)**

- HTML5 표준 기술.
- 클라이언트와 서버 간 **지속적인 연결**을 유지하며 양방향 통신을 지원.
- 초기 연결은 HTTP를 사용하지만, 연결이 설정되면 **웹소켓 프로토콜(TCP 기반)**로 전환.
- **특징:**
    - **Full-Duplex**: 클라이언트와 서버가 동시에 데이터를 송수신 가능.
    - 낮은 지연 시간.
    - 효율적인 실시간 데이터 전송.
- **사용 사례:** 실시간 채팅, 주식 거래, 게임, 실시간 알림 등.

<br>

## 2. **서버-센트 이벤트 (Server-Sent Events, SSE)**

- 서버가 클라이언트로 데이터를 **일방향 스트리밍**.
- 웹소켓처럼 복잡하지 않고, 클라이언트가 브라우저에서 쉽게 수신 가능.
- 서버가 **실시간 데이터를 푸시**해야 하는 경우 적합.
- **특징:**
    - HTTP 기반 (브라우저 호환성 높음).
    - 클라이언트 → 서버로의 메시지 전송은 불가능.
- **사용 사례:** 실시간 주식 가격 업데이트, 뉴스 피드.

<br>


## 3. **폴링 (HTTP Polling)**

- 클라이언트가 주기적으로 서버에 요청을 보내 **새 데이터가 있는지 확인**.
- 단순하지만 비효율적.
- **특징:**
    - 지연 시간이 HTTP 요청 간격에 따라 결정.
    - 서버 리소스 사용률 높음.
- **사용 사례:** 레거시 시스템에서 실시간 기능 구현.

<br>


## 4. **롱 폴링 (Long Polling)**

- 일반 폴링의 개선된 버전.
- 클라이언트가 요청을 보내면, 서버는 새로운 데이터가 발생할 때까지 대기 후 응답.
- **특징:**
    - 요청 간격을 줄여 서버 부하 감소.
    - HTTP 기반으로, 모든 브라우저에서 지원 가능.
- **사용 사례:** AJAX 기반 실시간 애플리케이션.

<br>


## 5. **WebRTC**

- 브라우저 간 P2P(peer-to-peer) 연결을 위한 표준.
- **특징:**
    - 미디어 스트리밍 (음성, 영상) 및 데이터 전송 지원.
    - 네트워크 지연이 적고 실시간성이 높음.
- **사용 사례:** 화상 통화, 파일 공유.

<br>


---

# **양방향 통신의 구조**

1. **초기 연결**:
    - HTTP 프로토콜 또는 TCP를 통해 클라이언트와 서버 간 연결 설정.
    - 예를 들어, 웹소켓은 HTTP 업그레이드 요청을 통해 연결 시작.
2. **연결 유지**:
    - 연결이 설정되면 클라이언트와 서버는 상태를 유지.
    - 웹소켓은 **Ping/Pong 메시지**로 연결 상태를 확인.
3. **데이터 송수신**:
    - 클라이언트와 서버가 자유롭게 데이터를 주고받음.

---

<br>


# **양방향 통신의 장단점**

#### **장점**

1. **실시간성**:
    - 클라이언트와 서버 간 데이터 전달 지연 시간이 매우 적음.
2. **효율성**:
    - 지속적인 연결로 요청-응답 오버헤드를 줄임.
3. **다양한 응용 가능성**:
    - 실시간 알림, 협업 도구, 게임, 스트리밍 등에 적합.

#### **단점**

1. **복잡성**:
    - HTTP 기반 통신보다 구현이 어려움.
2. **리소스 소모**:
    - 연결을 지속적으로 유지하므로 서버 자원을 더 많이 사용.
3. **브라우저/네트워크 제한**:
    - 네트워크 방화벽 및 프록시가 일부 프로토콜을 차단할 수 있음.

<br>


---

# **양방향 통신 사용 사례**

1. **실시간 채팅 애플리케이션**:
    - 메시지가 서버를 통해 즉각적으로 전달.
    - 예: WhatsApp, Slack.
2. **게임 서버**:
    - 실시간 상태 업데이트 및 동기화.
    - 예: 멀티플레이어 게임.
3. **실시간 데이터 스트리밍**:
    - 주식 가격, 스포츠 경기 점수.
    - 예: Bloomberg, ESPN.
4. **공동 작업 도구**:
    - Google Docs와 같은 협업 플랫폼.
5. **IoT 디바이스**:
    - 디바이스와 서버 간 상태 동기화.

<br>


# **웹소켓의 특징**

1. **양방향 통신 (Full-Duplex)**
    
    - 클라이언트와 서버가 서로 데이터를 실시간으로 주고받을 수 있습니다. 클라이언트의 요청이 없어도 서버가 데이터를 보낼 수 있습니다.
2. **지속적인 연결**
    
    - HTTP는 요청-응답 구조를 따르는 반면, 웹소켓은 초기 연결이 설정된 후엔 지속적으로 열려 있어 새로운 연결을 설정할 필요가 없습니다.
3. **낮은 오버헤드**
    
    - HTTP는 각 요청마다 헤더 정보를 포함해야 하지만, 웹소켓은 연결이 지속되므로 이후의 데이터 전송에서는 오버헤드가 적습니다.
4. **실시간성**
    
    - 지연 시간이 매우 적으며, 실시간 데이터 업데이트에 적합합니다.

<br>


---

## **웹소켓의 동작 과정**

1. **핸드셰이크 (Handshake)**
    
    - 웹소켓 연결은 HTTP 프로토콜을 통해 초기 요청이 이루어집니다.
    - 클라이언트는 서버로 웹소켓 업그레이드 요청을 보내며, 서버가 이를 수락하면 연결이 웹소켓 프로토콜로 전환됩니다.
    - 요청 헤더에 포함되는 주요 정보:

        `GET /chat HTTP/1.1 Host: example.com Upgrade: websocket Connection: Upgrade Sec-WebSocket-Key: dGhlIHNhbXBsZSBub25jZQ== Sec-WebSocket-Version: 13`
        
2. **데이터 전송**
    
    - 연결이 설정되면 양쪽에서 데이터를 자유롭게 주고받을 수 있습니다.
    - 웹소켓 메시지는 **프레임(frame)** 형태로 전송되며, 각 프레임은 최소한의 헤더와 데이터를 포함합니다.
3. **연결 종료**
    
    - 클라이언트나 서버가 연결을 종료할 수 있습니다. 종료 시엔 특정 종료 코드를 포함해 이유를 전달할 수 있습니다.

<br>

---

### **웹소켓의 장점**

1. **효율적인 통신**
    - 지속적인 연결로 인해 오버헤드가 적고, 실시간 통신이 필요할 때 더 효율적입니다.
2. **실시간 애플리케이션에 적합**
    - 채팅, 실시간 알림, 게임, 주식 거래 등과 같은 실시간 기능에 적합합니다.
3. **표준화된 프로토콜**
    - 다양한 브라우저와 서버에서 지원되며, 표준에 따라 구현됩니다.

<br>


---

### **웹소켓과 HTTP의 차이점**

|**특징**|**HTTP**|**웹소켓**|
|---|---|---|
|**통신 방식**|요청-응답 기반|양방향 통신|
|**연결 상태**|요청마다 새 연결 생성|지속적인 연결 유지|
|**지연 시간**|상대적으로 높음|낮음|
|**사용 사례**|일반 웹 브라우징, REST API|실시간 애플리케이션 (채팅, 게임 등)|

<br>


---

### **사용 사례**

1. **실시간 채팅**
    - 사용자 간의 메시지를 즉각적으로 주고받기 위해 사용됩니다.
2. **실시간 알림**
    - 서버에서 클라이언트로 즉시 알림을 푸시하기 위해 사용됩니다.
3. **라이브 스트리밍**
    - 실시간 비디오/오디오 데이터 전송에 적합합니다.
4. **실시간 협업**
    - Google Docs와 같은 공동 작업 도구에서 문서 변경 사항을 즉시 동기화합니다.
5. **주식 및 금융 애플리케이션**
    - 주식 가격 변동과 같은 데이터를 실시간으로 업데이트합니다.


<br>

*참고 : 이글은 ChatGPT 기반으로 작성 되었습니다.*